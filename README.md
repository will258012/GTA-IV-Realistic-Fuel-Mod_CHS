
# GTAIV-Realistic-Fuel-Mod 汉化版

该脚本基于Pedro Rodrigues制作的[Ultimate Fuel Script v2.1.0.0](https://www.gtainside.com/en/gta4/mods/47700-ultimate-fuel-script-v2)和Sandakelum制作的[Realistic Fuel Script 2.3.145.20929](https://www.gtagaming.com/realistic-fuel-mod-2-2-0-5-f22621.html)。
这个脚本适用于GTA IV完整版 (1.2.0.xx) 。

## 安装

### 在安装此脚本之前，请先安装[GTAIV完整版 汉化补丁](https://b9348.pages.dev)，这是显示中文字符的前提条件。

### 为保证脚本正常运行，需同时安装 [.NET Framework 4.8 运行时](https://dotnet.microsoft.com/download/dotnet-framework/thank-you/net48-web-installer)。

将[Releases](https://github.com/will258012/GTA-IV-Realistic-Fuel-Mod_CHS/releases)中下载的文件解压缩至游戏根目录即可。

## 注意

此脚本还使用了原版本的GUID（`3583e09d-6c44-4820-85e9-93926307d4f8`）。
所以不要同时使用这两个脚本，否则会在某些事件中引发冲突。

## 使用

不必担心，每一个帮助和你应该使用的键都会在你使用此脚本时作为游戏内说明提供给你。而且几乎一切都可自定义。

## 工具

如果需要调整燃油表的显示位置，请使用`DashboardPositioner.exe`。

## FAQ

Q. 在启动游戏时闪退或提示“`GTA IV FATAL ERROR Invalid resource detected - Please re-install the game`”。

A. 请多尝试几次。在第一次使用脚本时，这些情况可能会发生。

Q：我可以在设置（.ini）文件中添加新车辆的条目吗？

A.可以，请使用修改器，并记下该车辆的HASH代码。打开设置（.ini）文件，在“车辆燃油设置”部分复制一份条目,将车辆名称（方括号[]内部）更改为你的车辆的HASH代码。这个新条目中指定的值应该为你添加的车辆加载。你可以拥有的条目数量没有限制。

Q. 能添加偷取燃油的点位吗？

A. 如果你想添加一个新的点位，在设置（.ini）中的“汽车、摩托车的偷油点位”部分按格式添加。

## 更新日志

### 2.5.0.38351

#### 新增

- 汉化 `DashboardPositioner.exe`

### 2.5.0.38350

#### 新增

- 汉化整个模组
- 添加对EFLC车辆的支持
- 添加检查更新机制


#### 调整

- 因为支持问题，无法再通过电话呼叫应急燃油服务
- 优化应急燃油服务的体验

#### 修复

- 修复燃油耗尽时无法显示提示的问题
- 修复无法购买应急燃油瓶的问题

### 2.4.x.x

#### 修复
- 将脚本适配至1.2.0.43版本。

### 2.3.x.x

#### 新增
- 在自由城添加了许多偷油点位。（感谢 yoshiko 提供的点位！）
- 新增了一个之前未发现的加油站。
- 所有加油站类型增加了可选参数"DISPLAY"（见.ini文件中的“加油站设置”部分）。
- 提供了一个可选软件下载，用于简化油表在屏幕上的移动（见[工具](#工具)部分）。

#### 调整
- 信息显示系统进行了重大更改。
- 燃料瓶现在提供12/13的油量，而非之前的13/13。
- 更改了模组版本号的命名规则。

#### 修复
- 修复了与指示器模组的兼容性问题。
- 修复了在公交车上使用燃料瓶时可能导致的脚本崩溃。
- 修正了声音路径。
- 对紧急燃油服务动画进行了小修改。

#### 注意
- 新功能中可能缺少源代码注释。

### 2.2.0.4

#### 新增
- 添加了紧急燃油服务！
- 可设置玩家最大可携带燃料瓶数量（MAXFUELBOTTLES）。
- 可设置游戏加载时玩家免费获得的燃料瓶数量（FREEBOTTLES）。
- 可设置玩家购买单个燃料瓶的费用（FUELBOTTLECOST）。
- 可设置紧急燃油服务的费用（SERVICECOST）。
- 可设置呼叫紧急燃油服务的快捷键（SERVICEKEY）。
- 增加了紧急呼叫相关的文本通知配置。

#### 调整
- 优化了`FuelScript_Tick()`函数，提高计算速度。
- 添加了`Play()`函数，当玩家油量将耗尽时，播放声音。

#### 修复
- 修复了使用`String.Format()`的百分比和数量计算器，提高整体性能。
- 修复了beta版本标识不准确的问题。
- 修复了使用燃料瓶加油后重新上车时的崩溃问题。
- 修复了脚本崩溃问题，当玩家在注射燃料瓶后花费太长时间重新上车时发生（通常在低FPS下）。
- 修复了更多小错误。

#### 注意
- 源代码中新添加的功能和函数已完全注释。
